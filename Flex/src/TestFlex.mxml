<?xml version="1.0"?>
<s:Application
		xmlns:fx="http://ns.adobe.com/mxml/2009"
		xmlns:mx="library://ns.adobe.com/flex/mx"
		xmlns:s="library://ns.adobe.com/flex/spark"
		xmlns:views="views.*"
		width="100%" height="100%"
		frameRate="60"
		applicationComplete="init();">

	<fx:Script><![CDATA[
		import spark.core.SpriteVisualElement;

		import views.Stats;

		private function init():void {
			var stats:Stats = new Stats();
			stats.scaleX = stats.scaleY = 1.5;

			var element:SpriteVisualElement = new SpriteVisualElement();
			element.addChild(stats);
			addElement(element);

			bitmapLogView.stats = stats;
			flashLogView.stats = stats;
			flexLogView.stats = stats;
		}

		private function createBitmapLabels():void {
			labelGroup.logView = bitmapLogView;
			labelGroup.createBitmapLabels();
		}

		private function createFlashLabels():void {
			labelGroup.logView = flashLogView;
			labelGroup.createFlashLabels();
		}

		private function createFlexLabels():void {
			labelGroup.logView = flexLogView;
			labelGroup.createFlexLabels();
		}

		private function onCacheOptionsChange(event:MouseEvent):void {
			if(cacheAsBitmapCheckBox.selected) {
				labelGroup.cacheAsBitmap = true;
				cacheAsBitmapMatrixCheckBox.enabled = true;
				if(cacheAsBitmapMatrixCheckBox.selected) {
					labelGroup.cacheAsBitmapMatrix = labelGroup.transform.concatenatedMatrix;
				}
			}
			else {
				cacheAsBitmapMatrixCheckBox.enabled = false;
				labelGroup.cacheAsBitmap = true;
				labelGroup.cacheAsBitmapMatrix = null;
			}
		}
		]]></fx:Script>

	<s:Group width="100%" height="100%">

		<s:Group width="100%" height="75%">
			<views:LabelGroupView id="labelGroup"/>
		</s:Group>

		<s:HGroup bottom="0" width="100%" height="25%">


			<s:VGroup width="100%" height="100%">
				<s:CheckBox id="cacheAsBitmapCheckBox" click="onCacheOptionsChange(event)" label="Cache As Bitmap"/>
				<s:CheckBox id="cacheAsBitmapMatrixCheckBox" click="onCacheOptionsChange(event)" label="Cache As Bitmap Matrix"/>
			</s:VGroup>
			<s:VGroup width="100%" height="100%">
				<s:Button id="flexButton" label="Run Spark Label Test" click="createFlexLabels();"/>
				<views:LogView id="flexLogView" width="100%" height="100%"/>
			</s:VGroup>

			<s:VGroup width="100%" height="100%">
				<s:Button id="flashButton" label="Run Text Field Test" click="createFlashLabels();"/>
				<views:LogView id="flashLogView" width="100%" height="100%"/>
			</s:VGroup>

			<s:VGroup width="100%" height="100%">
				<s:Button id="bitmapButton" label="Run Bitmap Text Test" click="createBitmapLabels();"/>
				<views:LogView id="bitmapLogView" width="100%" height="100%"/>
			</s:VGroup>

		</s:HGroup>

	</s:Group>

</s:Application>
